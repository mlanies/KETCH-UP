# –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ: Telegram Web App –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –æ—Ñ–∏—Ü–∏–∞–Ω—Ç–æ–≤

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**Beverage Learning Bot** - —ç—Ç–æ Telegram –±–æ—Ç –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –æ—Ñ–∏—Ü–∏–∞–Ω—Ç–æ–≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞ KETCH UP –ø–æ –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç—É –≤–∏–Ω –∏ –¥—Ä—É–≥–∏—Ö –Ω–∞–ø–∏—Ç–∫–æ–≤. –ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è:

- **–û—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç** - –¥–ª—è –æ—Ñ–∏—Ü–∏–∞–Ω—Ç–æ–≤ —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –æ–±—É—á–µ–Ω–∏—è, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –ø–æ–∏—Å–∫–∞ –Ω–∞–ø–∏—Ç–∫–æ–≤
- **Web App** - –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏
- **–ê–¥–º–∏–Ω-–±–æ—Ç** - –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ —Å –ø–æ–ª–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –¥–æ—Å—Ç—É–ø–æ–º

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- **Backend**: Cloudflare Workers (JavaScript/Node.js)
- **Database**: Cloudflare D1 (SQLite)
- **Cache**: Cloudflare KV
- **External APIs**: Telegram Bot API, Google Sheets API, Cloudflare AI
- **Frontend**: HTML5, CSS3, JavaScript, Telegram Web App API

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
telegram-wine-bot/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ index.js                    # –û—Å–Ω–æ–≤–Ω–æ–π worker (—Ä–æ—É—Ç–∏–Ω–≥, API)
‚îÇ   ‚îú‚îÄ‚îÄ handlers/                   # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ telegram.js            # Telegram –±–æ—Ç –ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.js            # –†–∞–±–æ—Ç–∞ —Å –ë–î
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ learning.js            # –°–∏—Å—Ç–µ–º–∞ –æ–±—É—á–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ achievements.js        # –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ data.js                # –†–∞–±–æ—Ç–∞ —Å Google Sheets
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ai.js                  # –ò–ò –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ security.js            # –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
‚îÇ   ‚îú‚îÄ‚îÄ miniweb/                   # Web App —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.html             # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ learning.html          # –û–±—É—á–µ–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ wines.html             # –ë–∞–∑–∞ –Ω–∞–ø–∏—Ç–∫–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ menu.html              # –ú–µ–Ω—é
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ alcohol.html           # –ê–ª–∫–æ–≥–æ–ª—å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ search.html            # –ü–æ–∏—Å–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ achievements.html      # –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ challenges.html        # –ó–∞–¥–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ai.html                # –ò–ò –ø–æ–º–æ—â–Ω–∏–∫
‚îÇ   ‚îî‚îÄ‚îÄ utils/                     # –£—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ db/                           # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ schema.sql                # –°—Ö–µ–º–∞ –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ init-db.js                # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ docs/                         # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ scripts/                      # –°–∫—Ä–∏–ø—Ç—ã
```

## –ó–∞–¥–∞–Ω–∏–µ 1: –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ Web App

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ

**–§–∞–π–ª**: `src/miniweb/index.html`

#### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
1. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ `tg.initDataUnsafe.user`
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î
   - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ

2. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
   - –ê–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è
   - –£—Ä–æ–≤–µ–Ω—å –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å –æ–ø—ã—Ç–∞
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: –æ—á–∫–∏, –≤–æ–ø—Ä–æ—Å—ã, –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã, —Å–µ—Ä–∏—è

3. **–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏**
   - üéì –û–±—É—á–µ–Ω–∏–µ - –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å–∏—Å—Ç–µ–º–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
   - üç∑ –ë–∞–∑–∞ –Ω–∞–ø–∏—Ç–∫–æ–≤ - –∫–∞—Ç–∞–ª–æ–≥ –≤—Å–µ—Ö –Ω–∞–ø–∏—Ç–∫–æ–≤
   - üçΩÔ∏è –ú–µ–Ω—é - —Ä–∞–∑–¥–µ–ª –º–µ–Ω—é —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞
   - ü•É –ê–ª–∫–æ–≥–æ–ª—å - –∞–ª–∫–æ–≥–æ–ª—å–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏
   - üîç –ü–æ–∏—Å–∫ - –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
   - üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è - —Å–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
   - üéØ –ó–∞–¥–∞–Ω–∏—è - –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è
   - ü§ñ –ò–ò –ü–æ–º–æ—â–Ω–∏–∫ - AI –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç

#### –î–∏–∑–∞–π–Ω:
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UI —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–º —Ñ–æ–Ω–æ–º
- –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å—Ç–∫–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Web App API
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–º–Ω–æ–π/—Å–≤–µ—Ç–ª–æ–π —Ç–µ–º—ã Telegram

#### API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
- `GET /user-stats?chat_id={id}` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /create-user` - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## –ó–∞–¥–∞–Ω–∏–µ 2: –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

#### –í —Ñ–∞–π–ª–µ `src/index.js`:
1. **API —ç–Ω–¥–ø–æ–∏–Ω—Ç —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
   ```javascript
   if (url.pathname === '/create-user' && request.method === 'POST') {
     return createUser(request, env);
   }
   ```

2. **–§—É–Ω–∫—Ü–∏—è createUser**
   - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (chat_id, username, first_name, last_name)
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î
   - –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ DatabaseManager

#### –í —Ñ–∞–π–ª–µ `src/handlers/database.js`:
1. **–ú–µ—Ç–æ–¥ createUser**
   ```javascript
   async createUser(userData) {
     const { chat_id, username, first_name, last_name } = userData;
     // SQL –∑–∞–ø—Ä–æ—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   }
   ```

## –ó–∞–¥–∞–Ω–∏–µ 3: –°—Ç—Ä–∞–Ω–∏—Ü—ã Web App

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º

#### 1. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–±—É—á–µ–Ω–∏—è (`learning.html`)
- **–§—É–Ω–∫—Ü–∏–∏**: —Ç–µ—Å—Ç—ã, —É—Ä–æ–∫–∏, –ø—Ä–æ–≥—Ä–µ—Å—Å –æ–±—É—á–µ–Ω–∏—è
- **API**: `/learning/start`, `/learning/question`, `/learning/answer`
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: –∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å, –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è

#### 2. –ë–∞–∑–∞ –Ω–∞–ø–∏—Ç–∫–æ–≤ (`wines.html`)
- **–§—É–Ω–∫—Ü–∏–∏**: –∫–∞—Ç–∞–ª–æ–≥, —Ñ–∏–ª—å—Ç—Ä—ã, –ø–æ–∏—Å–∫, –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- **API**: `/wines`, `/wines/{id}`, `/wines/search`
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –æ–ø–∏—Å–∞–Ω–∏—è

#### 3. –ú–µ–Ω—é (`menu.html`)
- **–§—É–Ω–∫—Ü–∏–∏**: –º–µ–Ω—é —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞, –∫–æ–∫—Ç–µ–π–ª–∏, –±–µ–∑–∞–ª–∫–æ–≥–æ–ª—å–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏
- **API**: `/menu`, `/menu/cocktails`, `/menu/non-alcohol`
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –º–µ–Ω—é, —Ä–µ—Ü–µ–ø—Ç—ã

#### 4. –ê–ª–∫–æ–≥–æ–ª—å (`alcohol.html`)
- **–§—É–Ω–∫—Ü–∏–∏**: –≤–∏–Ω–∞, –∫—Ä–µ–ø–∫–∏–µ –Ω–∞–ø–∏—Ç–∫–∏, –ø–∏–≤–æ
- **API**: `/alcohol/wines`, `/alcohol/spirits`, `/alcohol/beer`
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

#### 5. –ü–æ–∏—Å–∫ (`search.html`)
- **–§—É–Ω–∫—Ü–∏–∏**: –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, —Ñ–∏–ª—å—Ç—Ä—ã, –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ
- **API**: `/search?q={query}`, `/search/filters`
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫, –ø–æ–¥—Å–∫–∞–∑–∫–∏

#### 6. –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è (`achievements.html`)
- **–§—É–Ω–∫—Ü–∏–∏**: —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π, –ø—Ä–æ–≥—Ä–µ—Å—Å, –Ω–∞–≥—Ä–∞–¥—ã
- **API**: `/achievements`, `/achievements/progress`
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è, –º–æ—Ç–∏–≤–∞—Ü–∏—è

#### 7. –ó–∞–¥–∞–Ω–∏—è (`challenges.html`)
- **–§—É–Ω–∫—Ü–∏–∏**: –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è, –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ —Ü–µ–ª–∏
- **API**: `/challenges/daily`, `/challenges/weekly`
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: —Ä–µ–≥—É–ª—è—Ä–Ω–æ—Å—Ç—å, —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ

#### 8. –ò–ò –ø–æ–º–æ—â–Ω–∏–∫ (`ai.html`)
- **–§—É–Ω–∫—Ü–∏–∏**: —á–∞—Ç —Å –ò–ò, –≤–æ–ø—Ä–æ—Å—ã –æ –Ω–∞–ø–∏—Ç–∫–∞—Ö
- **API**: `/ai/chat`, `/ai/question`
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã, –æ–±—É—á–µ–Ω–∏–µ

## –ó–∞–¥–∞–Ω–∏–µ 4: –ê–¥–º–∏–Ω-–±–æ—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∞–¥–º–∏–Ω-–±–æ—Ç—É

#### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
1. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—É—á–µ–Ω–∏—è**
   - –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
   - –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
   - –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –æ–±—É—á–µ–Ω–∏—è

2. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º**
   - –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ Web App
   - –û—Ç–∑—ã–≤ –¥–æ—Å—Ç—É–ø–∞
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞/—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞

3. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º**
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –Ω–∞–ø–∏—Ç–∫–æ–≤
   - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–æ–≤
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º–∏
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–¥–∞–Ω–∏–π

#### –ö–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω-–±–æ—Ç–∞:
- `/stats` - –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `/users` - —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `/access {username} {role}` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º
- `/block {username}` - –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
- `/unblock {username}` - —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
- `/refresh` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

## –ó–∞–¥–∞–Ω–∏–µ 5: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î (—É–∂–µ —Å–æ–∑–¥–∞–Ω–∞ –≤ `db/schema.sql`)

#### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
1. **users** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
2. **learning_sessions** - —Å–µ—Å—Å–∏–∏ –æ–±—É—á–µ–Ω–∏—è
3. **user_answers** - –æ—Ç–≤–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
4. **achievements** - –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
5. **daily_challenges** - –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è
6. **activity_log** - –ª–æ–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

#### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –∞–¥–º–∏–Ω-—Ñ—É–Ω–∫—Ü–∏–π:
```sql
-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º
CREATE TABLE IF NOT EXISTS user_access (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    chat_id INTEGER,
    role TEXT NOT NULL, -- 'user', 'admin', 'moderator'
    granted_by INTEGER,
    granted_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    expires_at TIMESTAMP,
    is_active BOOLEAN DEFAULT TRUE,
    FOREIGN KEY (chat_id) REFERENCES users(chat_id),
    FOREIGN KEY (granted_by) REFERENCES users(chat_id)
);

-- –õ–æ–≥ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
CREATE TABLE IF NOT EXISTS admin_log (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    admin_id INTEGER,
    action TEXT NOT NULL,
    target_user_id INTEGER,
    details TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (admin_id) REFERENCES users(chat_id),
    FOREIGN KEY (target_user_id) REFERENCES users(chat_id)
);
```

## –ó–∞–¥–∞–Ω–∏–µ 6: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏**
   - –í–∞–ª–∏–¥–∞—Ü–∏—è Telegram Web App –¥–∞–Ω–Ω—ã—Ö
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ initData
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –∂–∏–∑–Ω–∏ —Ç–æ–∫–µ–Ω–∞

2. **–ó–∞—â–∏—Ç–∞ API**
   - Rate limiting
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

3. **–ó–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö**
   - –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π
   - –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

## –ó–∞–¥–∞–Ω–∏–µ 7: –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

1. **Cloudflare Workers**
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ wrangler.toml
   - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
   - –ü—Ä–∏–≤—è–∑–∫–∞ –∫ D1 –∏ KV

2. **Telegram Bot**
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Web App –≤ BotFather
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ webhook
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–º–∞–Ω–¥

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
   - –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
   - –ê–ª–µ—Ä—Ç—ã –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- [ ] –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã Web App –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—Ç
- [ ] API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- [ ] –°–∏—Å—Ç–µ–º–∞ –æ–±—É—á–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–µ–π
- [ ] –ê–¥–º–∏–Ω-–±–æ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- [ ] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç

### –ù–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- [ ] –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü < 2 —Å–µ–∫—É–Ω–¥
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- [ ] –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö
- [ ] –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

## –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏

- **–≠—Ç–∞–ø 1** (–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ + –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è): 3-5 –¥–Ω–µ–π
- **–≠—Ç–∞–ø 2** (–û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã Web App): 7-10 –¥–Ω–µ–π
- **–≠—Ç–∞–ø 3** (–ê–¥–º–∏–Ω-–±–æ—Ç): 5-7 –¥–Ω–µ–π
- **–≠—Ç–∞–ø 4** (–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è): 3-5 –¥–Ω–µ–π

**–û–±—â–µ–µ –≤—Ä–µ–º—è**: 18-27 –¥–Ω–µ–π

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# Telegram
TELEGRAM_BOT_TOKEN=your_bot_token
TELEGRAM_ADMIN_BOT_TOKEN=your_admin_bot_token

# Google Sheets
GOOGLE_SHEETS_API_KEY=your_api_key
GOOGLE_SHEETS_SPREADSHEET_ID=your_spreadsheet_id

# Cloudflare
CLOUDFLARE_AI_TOKEN=your_ai_token

# Database
D1_DATABASE_ID=your_d1_database_id
KV_NAMESPACE_ID=your_kv_namespace_id
```

### API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ñ–∞–π–ª–µ `docs/api/API_DOCUMENTATION.md`

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –¥–ª—è API
- –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Web App
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ 